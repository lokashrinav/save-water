{% extends "base.html" %}

{% block content %}
<div class="main-content">
    <h2 class="section-title">Analysis Complete</h2>
    
    <div class="alert alert-success">
        Analysis completed successfully. Results are ready for download.
    </div>
    
    <!-- Metrics -->
    <div class="row" style="margin-bottom: 32px;">
        <div class="col-md-4">
            <div class="metric-card">
                <div class="metric-icon" style="color: var(--accent-color);">
                    <i class="fas fa-satellite"></i>
                </div>
                <div class="metric-value">{{ num_images }}</div>
                <div class="metric-label">Images Processed</div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="metric-card">
                <div class="metric-icon" style="color: var(--warning-color);">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="metric-value">{{ num_changes }}</div>
                <div class="metric-label">Areas Detected</div>
            </div>
        </div>
        <div class="col-md-4">
            <div class="metric-card">
                <div class="metric-icon" style="color: var(--success-color);">
                    <i class="fas fa-check"></i>
                </div>
                <div class="metric-value">Ready</div>
                <div class="metric-label">Report Status</div>
            </div>
        </div>
    </div>
    
    <!-- Process Status -->
    <div class="status-section">
        <div class="status-title">Processing Pipeline</div>
        <div class="process-grid">
            <div class="process-item">
                <i class="fas fa-check" style="color: var(--success-color);"></i>
                Satellite data retrieved
            </div>
            <div class="process-item">
                <i class="fas fa-check" style="color: var(--success-color);"></i>
                NDWI analysis complete
            </div>
            <div class="process-item">
                <i class="fas fa-check" style="color: var(--success-color);"></i>
                Pipeline masking applied
            </div>
            <div class="process-item">
                {% if num_changes > 0 %}
                <i class="fas fa-exclamation-triangle" style="color: var(--warning-color);"></i>
                {{ num_changes }} areas identified
                {% else %}
                <i class="fas fa-check" style="color: var(--success-color);"></i>
                No changes detected
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- Download -->
    <div class="status-section">
        <div class="status-title">Download Results</div>
        <p style="color: var(--text-secondary); margin-bottom: 20px;">
            Complete analysis package including satellite imagery, processed data, and documentation.
        </p>
        <div class="text-center">
            <a href="{{ url_for('download_results', timestamp=timestamp) }}" class="btn btn-primary">
                <i class="fas fa-download"></i>
                Download Analysis
            </a>
        </div>
    </div>
    
    <!-- Status -->
    {% if num_changes > 0 %}
    <div class="alert alert-warning">
        <strong>Areas of Interest:</strong> {{ num_changes }} areas require field investigation.
    </div>
    {% else %}
    <div class="alert alert-info">
        <strong>No Significant Changes:</strong> Analysis found no major anomalies during the specified period.
    </div>
    {% endif %}
    
    <div class="text-center" style="margin-top: 32px;">
        <a href="{{ url_for('index') }}" class="btn btn-secondary">
            <i class="fas fa-plus"></i>
            New Analysis
        </a>
    </div>
</div>
{% endblock %}
